{% extends 'base.html' %} {% block body %}
<div class="descricaoEntrega">
  <p>
    Nessa segunda entrega de módulo, o problema apresentado foi do
    produtor-consumidor, que é um clássico da programação concorrente onde um ou
    mais produtores enchem um buffer compartilhado com dados, enquanto um ou
    mais consumidores retiram esses dados. O desafio era garantir que tudo
    acontecesse sem conflitos — ou seja, sem dois produtores tentando gravar no
    mesmo lugar ao mesmo tempo, ou um consumidor pegando um dado que ainda não
    estava pronto.
  </p>
  <p>Para isso, nós usamos semáforos pra controlar o acesso:</p>
  <div class="topicosEntrega">
    <ul>
      <li>
        mutex: pra garantir que só uma thread (produtor ou consumidor) mexa no
        buffer por vez.
      </li>
      <li>
        empty: pra contar espaços vazios (se ficar zero, o produtor espera).
      </li>
      <li>
        full: pra contar espaços ocupados (se ficar zero, o consumidor espera).
      </li>
    </ul>
  </div>
  <p>
    Além disso, implementamos um buffer circular com filas pra saber onde o
    próximo dado deve ser escrito ou lido. As threads usam a biblioteca
    ''pthreads'', e evitamos a espera ociosa fazendo com que elas "dormissem"
    (wait) quando não podiam agir, e "acordassem" (signal) quando o buffer
    ficava disponível.
  </p>
  <p>
    No fim, o programa controla coerentemente a quantidade de espaços que estão
    livres ou ocupados, evita acessos simultâneos que poderiam corromper dados e
    garante que produtores e consumidores trabalhem de forma sincronizada e
    eficiente, sem gastar processamento de forma desnecessária. Essa é a base
    para entender como sistemas operacionais e aplicações multitarefa gerenciam
    recursos compartilhados!
  </p>

  <br />
  <h2>Simulador do Problema Produtor-Consumidor</h2>

  <p>Defina os parâmetros para a nossa simulação!</p>

  <!-- Formulário para configurar o número de produtores, consumidores e tamanho do buffer -->
  <form class="form-entrega2" method="POST" action="/simuladorEntrega2">
    <label for="num_produtores">Número de Produtores:</label>
    <input
      type="number"
      id="num_produtores"
      name="num_produtores"
      value="1"
      min="1"
      required
    />

    <label for="num_consumidores">Número de Consumidores:</label>
    <input
      type="number"
      id="num_consumidores"
      name="num_consumidores"
      value="1"
      min="1"
      required
    />

    <label for="buffer_size">Tamanho do Buffer:</label>
    <input
      type="number"
      id="buffer_size"
      name="buffer_size"
      value="5"
      min="1"
      required
    />

    <button type="submit">Iniciar Simulação</button>
  </form>

  {% if buffer_status is not none %}
  <div class="statusBuffer">
    <h4>Status Atual do Buffer:</h4>
    <p>Espaços Livres: {{ buffer_status['empty'] }}</p>
    <p>Espaços Ocupados: {{ buffer_status['full'] }}</p>
    <p>Buffer: {{ buffer_status['buffer'] }}</p>
  </div>
  {% endif %}
  <div />
  {% endblock %}
</div>
